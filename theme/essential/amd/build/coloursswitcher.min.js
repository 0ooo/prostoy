/**
 * Essential is a clean and customizable theme.
 *
 * @package     theme_essential
 * @copyright   2016 Gareth J Barnard
 * @copyright   2015 Gareth J Barnard
 * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
/* jshint ignore:start */
define(["jquery","core/log"],function(a,b){"use strict";// jshint ;_;
return b.debug("Essential Colour Switcher AMD"),function(a){
// Constructor.
var c=function(b,c){this.$element=a(b),this.SCHEMES=["default","alternative1","alternative2","alternative3","alternative4"],this.scheme="default",this.init(c)};c.prototype={constructor:c,init:function(c){var d,e;/* Attach events to the links to change colours scheme so we can do it with
                   JavaScript without refreshing the page. */
b.debug("Colour switcher on element: "+c.div);var f=a("body");for(d in this.SCHEMES){e=this.SCHEMES[d],
// Check if this is the current colour.
f.hasClass("essential-colours-"+e)&&(this.scheme=e,b.debug("Colour switcher current scheme: "+e));var g=this;a(c.div+" ."+e).each(function(){b.debug("Colour switcher 'init' each: "+e),a(this).click({scheme:e,us:g},g.setScheme)})}},setScheme:function(a){if(a.preventDefault(),b.debug("Colour switcher 'setScheme' scheme: "+a.data.scheme),b.debug("Colour switcher 'setScheme' our scheme: "+a.data.us.scheme),a.data.scheme!=a.data.us.scheme){
// Switch over the CSS classes on the body.
var c="essential-colours-";
// The $element is the 'body', see module 'init' below.
a.data.us.$element.removeClass(c+a.data.us.scheme).addClass(c+a.data.scheme),
// Update the current colour.
a.data.us.scheme=a.data.scheme,
// Store the users selection (uses AJAX to save to the database).
// Core YUI function, so only need to replace if core changes.
M.util.set_user_preference("theme_essential_colours",a.data.us.scheme),b.debug("Colour switcher 'setScheme' our scheme now: "+a.data.us.scheme)}}};
// Plugin definition.
var d=a.fn.ColoursSwitcher;a.fn.ColoursSwitcher=function(a){return new c(this,a),this},
// No conflict.
a.fn.ColoursSwitcher.noConflict=function(){return a.fn.ColoursSwitcher=d,this}}(a),{init:function(c){a(document).ready(function(a){return b.debug("Essential Colour Switcher AMD init"),a(document.body).ColoursSwitcher(c)})}}});